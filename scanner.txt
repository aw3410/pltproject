Def scan(input):
  Current = â€œâ€
  State = s0
  i=0
  tokenType = â€˜â€™
  keywords = [â€œpotionâ€, "prince","villain", â€œcrownâ€, â€œtiaraâ€, â€œkingâ€, â€œqueenâ€, â€œroseâ€, â€œcastSpellâ€, "paint", â€œonceuponatimeâ€, â€œhappilyaftereverâ€, "inanotherkingdom",'while","if","alive","dead"]
  punctuation = [ , | . | ( | ) | { | } | :] (Separated by | instead of comma for clarity)
  Operators = [â€˜+â€™,â€˜=â€™,â€˜-â€™, â€˜*â€™, â€˜/â€™, â€˜==â€™,  â€˜<=â€™, â€˜!=â€™, â€˜>=â€™, â€˜>â€™, â€˜<']
  Tokens = []
  errormessage = []
  Open = 0
  
  while (state != s_err and i<len(input))
	c = input[i]
	if (c == â€˜ â€œ â€™):
		start = i
		tokenType = â€œSTRINGâ€
		while (c != â€œ â€ â€œ and c != â€˜EOFâ€™):
			current  += c
			state=ğ›¿(state, c)
			i+=1
		if (c == â€˜eofâ€™): 
			errormessage.append(â€œUnclosed string starting at position â€, start) 
      		else: 
        		tokens.append(â€œ<â€ +tokenType+ â€œ, â€ + current + â€œ>â€/n) 
		
    	elif (c.isDigit()):
      		tokenType = â€œINTLITERALâ€	
      		while( c != 'EOF' and c.isDigit()):
        		Current  += c
        		state=ğ›¿(state, c)
        		i+=1
      		if (c is not in Operators or c.isAlpha() or c == â€˜ â€œ â€™ or c == â€˜ â€ â€™)
      			state = s_err 
      			errormessage.append(â€œError at position: â€œ + i + â€œ. the character is â€œ + c + â€œ. intliterals can only include digits")
		tokens.append(â€œ<â€ +tokenType+ â€œ, â€ + current + â€œ>â€/n) 

    	elif(c is in Operators): 
    		tokenType = â€œOPERATORâ€
		if (i==0):
			state = s_err
    		while (c != 'EOF') 
      			current  += c
        		state=ğ›¿(state, c)
        		i+=1
      		tokens.append(â€œ<â€ +tokenType+ â€œ, â€ + current + â€œ>â€/n)

    	elif (c is in punctuation):
		tokenType = â€œPUNCTUATIONâ€ 
		current  += c
      		state=ğ›¿(state, c)
      		if c == â€œ(â€ or c== â€œ{â€:
        		open +=1
      		if c == â€œ)â€ or c == â€œ}â€:
	      		open -=1
      		tokens.append(â€œ<â€ +tokenType+ â€œ, â€ + current + â€œ>â€/n)
    
    	elif c.isalpha():
  		while (c.isalpha() or c.isDigit()): 
  			current  += c
        		state=ğ›¿(state, c)
        		i += 1
      		if (current in keywords): 
        		tokenType = â€œKEYWORDâ€ 
      		elif (current not in keywords): 
	        	tokenType = â€œIDENTIFIERâ€
          	tokens.append(â€œ<â€ +tokenType+ â€œ, â€ + current + â€œ>â€/n)
	else:
		errormessage.append(â€œError at position: â€œ + i + â€œ. â€œ + c + â€œ is an invalid characterâ€)
		state = s_err 
			
if open != 0:
	/* report error*/
	errormessage.append(â€œOpen bracket or parenthesis.â€)
	state = s_err

if (state âˆˆ F): 
  /* accept */
  print(tokens);
elif:
  /* report failure */
  print(errormessageâ€™) 
  state = s_err
